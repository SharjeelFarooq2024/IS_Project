{% extends 'base.html' %}

{% block title %}Record Details · {{ patient.decrypted_name }}{% endblock %}

{% block content %}
<div class="page-header d-flex flex-column flex-md-row align-items-md-center justify-content-between gap-3">
    <div>
        <h1 class="page-title"><i class="fas fa-file-medical"></i> {{ record.decrypted_record_name or 'Untitled Record' }}</h1>
        <p class="text-muted mb-0">Doctor: {{ record.doctor.decrypted_name if record.doctor else '—' }} · Created {{ record.created_at.strftime('%b %d, %Y %H:%M') if record.created_at else 'N/A' }}</p>
    </div>
    <a href="{{ url_for('main.patient_dashboard') }}" class="btn btn-outline-secondary">
        <i class="fas fa-arrow-left"></i> Back to Records
    </a>
</div>

<div class="card">
    <div class="card-header"><i class="fas fa-shield-halved"></i> Encrypted Content</div>
    <div class="card-body">
        <p class="text-muted">Your health record remains encrypted for your privacy. Contact your healthcare provider if you need assistance decrypting this data.</p>
        <pre class="encrypted-block">{{ record.decrypted_record or 'Encrypted content unavailable.' }}</pre>
        <div class="mt-3">
            <strong>Search Keywords:</strong>
            <span class="badge bg-secondary">{{ record.keyword_hash }}</span>
        </div>
    </div>
</div>
{% endblock %}
